# ====================================
# SHARED REQUIREMENTS FOR ALL SERVICES
# ====================================
# This file defines the baseline dependencies that all services should use.
# Individual services can extend this with their specific dependencies.
#
# Usage:
# - Include this in your service requirements.txt: -r ../requirements.shared.txt
# - Add service-specific dependencies below the shared requirements
#
# Maintained by: Services Coordinator Agent
# Last Updated: 2025-09-09

# ====================================
# CORE FRAMEWORK (Latest Stable)
# ====================================
fastapi==0.116.1              # Latest FastAPI version (Jan 2025)
uvicorn[standard]==0.35.0     # Latest Uvicorn with standard features
pydantic==2.11.7              # Latest Pydantic v2
pydantic[email]==2.11.7       # Pydantic with email validation
pydantic-settings==2.8.0      # Latest settings management

# ====================================
# DATABASE & ORM (Latest Stable)
# ====================================
sqlalchemy==2.0.43            # Latest SQLAlchemy 2.0 (Aug 2025)
alembic==1.14.0               # Latest database migrations

# NOTE: Database drivers are SERVICE-SPECIFIC
# Each service should add their own database driver:
# - Identity Service: asyncpg==0.29.0 (async PostgreSQL)
# - Other Services: psycopg2-binary==2.9.9 (sync PostgreSQL)
# This prevents compilation conflicts and allows flexible driver choice

# ====================================
# REDIS & CACHING (Latest Stable)
# ====================================
redis==4.6.0                  # Redis client (compatible with Celery)
aioredis==2.0.1               # Async Redis client

# ====================================
# AUTHENTICATION & SECURITY (Latest Stable)
# ====================================
python-jose[cryptography]==3.3.0    # JWT handling
passlib[bcrypt]==1.7.4               # Password hashing
PyJWT==2.8.0                         # JWT tokens
bcrypt==4.2.0                        # Latest bcrypt
cryptography==42.0.8                 # Latest cryptography

# ====================================
# HTTP CLIENT (Latest Stable)
# ====================================
httpx==0.27.2                 # Latest HTTP client for service-to-service communication

# ====================================
# ENVIRONMENT & CONFIG (Latest Stable)
# ====================================
python-dotenv==1.0.1          # Environment variable loading
python-multipart==0.0.12      # File upload support

# ====================================
# DEVELOPMENT & TESTING (Latest Stable)
# ====================================
pytest==8.3.4                 # Latest pytest
pytest-asyncio==0.24.0        # Async test support
pytest-cov==6.0.0             # Coverage reporting
black==25.1.0                  # Code formatting (2025 stable style)
isort==5.13.2                  # Import sorting
flake8==7.1.1                  # Linting

# ====================================
# PRODUCTION & MONITORING (Latest Stable)
# ====================================
prometheus-client==0.21.1     # Metrics collection
structlog==25.1.0             # Structured logging

# ====================================
# SERVICE-SPECIFIC DEPENDENCIES (Not Shared)
# ====================================
# The following dependencies are NOT included in shared requirements
# due to compilation complexity or service-specific needs:
#
# Database Drivers (add to individual services):
# - asyncpg==0.29.0 (async PostgreSQL - identity service)
# - psycopg2-binary==2.9.9 (sync PostgreSQL - other services)
#
# Communication/Messaging (add as needed):
# - grpcio==1.60.0 (gRPC server/client - identity service)
# - grpcio-tools==1.60.0 (gRPC compilation tools - identity service)
# - celery==5.3.4 (task queues - communication/workflow services)
#
# External Service Integrations (add as needed):
# - openai==1.3.5 (AI services - workflow service)
# - anthropic==0.7.8 (AI services - workflow service)
# - twilio==8.10.1 (SMS - communication service)
# - sendgrid==6.10.0 (email - communication service)