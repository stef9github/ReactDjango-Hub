graph TB
    %% Title and Date
    Title["ReactDjango Hub - Unified Multi-Vertical Platform Architecture<br/>Medical Hub + Public Hub Cohabitation<br/>Date: 2025-09-13"]
    
    %% External Users Layer
    subgraph Users["External Users"]
        MedUsers["Medical Hub Users<br/>â€¢ Healthcare Providers<br/>â€¢ Patients<br/>â€¢ Medical Staff<br/>â€¢ Insurance Partners"]
        PubUsers["Public Hub Users<br/>â€¢ Community Members<br/>â€¢ Content Creators<br/>â€¢ Administrators<br/>â€¢ Public Service Users"]
    end
    
    %% Frontend Applications Layer
    subgraph Frontend["Frontend Applications Layer"]
        subgraph MedicalFrontend["Medical Hub Frontend"]
            MedReact["React Medical App<br/>â€¢ Patient Portal<br/>â€¢ Provider Dashboard<br/>â€¢ Appointment System<br/>â€¢ Medical Records UI<br/>â€¢ Billing Interface"]
            MedMobile["Medical Mobile Apps<br/>â€¢ iOS/Android Patient<br/>â€¢ Provider Mobile<br/>â€¢ Emergency Access"]
        end
        
        subgraph PublicFrontend["Public Hub Frontend"]
            PubReact["React Public App<br/>â€¢ Community Portal<br/>â€¢ Content Management<br/>â€¢ Public Services<br/>â€¢ Forums & Social<br/>â€¢ Event Management"]
            PubMobile["Public Mobile Apps<br/>â€¢ iOS/Android Community<br/>â€¢ Service Access<br/>â€¢ Content Browser"]
        end
        
        SharedUI["Shared UI Components<br/>â€¢ Design System<br/>â€¢ Component Library<br/>â€¢ Authentication UI<br/>â€¢ Common Widgets"]
    end
    
    %% API Gateway Layer
    subgraph Gateway["API Gateway Layer - Kong"]
        RouteEngine["Intelligent Route Engine<br/>â€¢ Vertical Detection<br/>â€¢ Load Balancing<br/>â€¢ Rate Limiting"]
        
        subgraph Routes["Routing Rules"]
            MedRoutes["Medical Routes<br/>/api/medical/*<br/>/api/health/*<br/>/api/clinical/*"]
            PubRoutes["Public Routes<br/>/api/public/*<br/>/api/community/*<br/>/api/content/*"]
            SharedRoutes["Shared Routes<br/>/api/auth/*<br/>/api/user/*<br/>/api/org/*"]
        end
        
        GatewayMiddleware["Gateway Middleware<br/>â€¢ Authentication<br/>â€¢ Authorization<br/>â€¢ Request Transformation<br/>â€¢ Response Caching<br/>â€¢ Security Policies"]
    end
    
    %% Microservices Layer
    subgraph Microservices["Microservices Layer"]
        subgraph CoreServices["Core Platform Services"]
            Identity["Identity Service<br/>FastAPI:8001<br/>â€¢ User Management<br/>â€¢ Organizations<br/>â€¢ MFA/2FA<br/>â€¢ RBAC<br/>â€¢ JWT Management<br/>â€¢ Session Control"]
            
            Communication["Communication Service<br/>FastAPI:8002<br/>â€¢ Notifications<br/>â€¢ Email/SMS<br/>â€¢ Real-time Messaging<br/>â€¢ WebSockets<br/>â€¢ Event Broadcasting"]
            
            Content["Content Service<br/>FastAPI:8003<br/>â€¢ Document Management<br/>â€¢ File Storage<br/>â€¢ Media Processing<br/>â€¢ Version Control<br/>â€¢ CDN Integration"]
            
            Workflow["Workflow Intelligence<br/>FastAPI:8004<br/>â€¢ Process Automation<br/>â€¢ AI/ML Workflows<br/>â€¢ Business Rules<br/>â€¢ Task Orchestration<br/>â€¢ Intelligent Routing"]
        end
        
        subgraph ExtendedServices["Vertical-Specific Services"]
            MedicalExt["Medical Extensions<br/>â€¢ FHIR Service<br/>â€¢ HL7 Integration<br/>â€¢ Medical Imaging<br/>â€¢ Lab Results API<br/>â€¢ Prescription Service"]
            
            PublicExt["Public Extensions<br/>â€¢ Forum Service<br/>â€¢ Event Management<br/>â€¢ Survey Service<br/>â€¢ Public API Gateway<br/>â€¢ Social Features"]
        end
    end
    
    %% Django Backend Layer
    subgraph Django["Django Business Logic Layer - Port 8000"]
        subgraph DjangoCore["Core Django Apps"]
            CoreApps["Shared Core Apps<br/>â€¢ Users & Profiles<br/>â€¢ Organizations<br/>â€¢ Permissions<br/>â€¢ Audit Logging<br/>â€¢ Configuration"]
        end
        
        subgraph DjangoMedical["Medical Vertical Apps"]
            MedApps["Medical Apps<br/>â€¢ Patients Management<br/>â€¢ Appointments<br/>â€¢ Medical Records<br/>â€¢ Billing & Insurance<br/>â€¢ Clinical Workflows<br/>â€¢ Prescriptions<br/>â€¢ Lab Integration"]
        end
        
        subgraph DjangoPublic["Public Vertical Apps"]
            PubApps["Public Apps<br/>â€¢ Community Management<br/>â€¢ Content Publishing<br/>â€¢ Forums & Discussions<br/>â€¢ Events & Calendar<br/>â€¢ Public Services<br/>â€¢ Analytics Dashboard"]
        end
        
        DjangoMiddleware["Django Middleware<br/>â€¢ Vertical Detection<br/>â€¢ Tenant Isolation<br/>â€¢ Request Context<br/>â€¢ Security Layer<br/>â€¢ Performance Monitoring"]
    end
    
    %% Data Layer
    subgraph DataLayer["Data Layer Architecture"]
        subgraph Databases["PostgreSQL Databases"]
            SharedDB["Shared Database<br/>â€¢ Users<br/>â€¢ Organizations<br/>â€¢ Permissions<br/>â€¢ Configuration<br/>â€¢ Audit Logs"]
            
            MedicalDB["Medical Database<br/>â€¢ Patient Records<br/>â€¢ Clinical Data<br/>â€¢ Appointments<br/>â€¢ Medical History<br/>â€¢ Prescriptions<br/>â€¢ Lab Results<br/>â€¢ Insurance Data"]
            
            PublicDB["Public Database<br/>â€¢ Community Data<br/>â€¢ Content Repository<br/>â€¢ Forum Posts<br/>â€¢ Events<br/>â€¢ Public Services<br/>â€¢ Analytics Data"]
            
            IdentityDB["Identity DB<br/>â€¢ Auth Tokens<br/>â€¢ Sessions<br/>â€¢ MFA Data<br/>â€¢ User Credentials"]
            
            ContentDB["Content DB<br/>â€¢ Documents<br/>â€¢ Media Metadata<br/>â€¢ Versions<br/>â€¢ Access Control"]
        end
        
        subgraph Cache["Caching Layer"]
            Redis["Redis Cache<br/>â€¢ Session Store<br/>â€¢ API Cache<br/>â€¢ Real-time Data<br/>â€¢ Queue Management<br/>â€¢ Pub/Sub"]
        end
        
        subgraph Storage["File Storage"]
            MedStorage["Medical Storage<br/>â€¢ Medical Images<br/>â€¢ Lab Documents<br/>â€¢ Patient Files<br/>â€¢ Encrypted Data"]
            
            PubStorage["Public Storage<br/>â€¢ Public Content<br/>â€¢ Media Files<br/>â€¢ User Uploads<br/>â€¢ Community Assets"]
        end
    end
    
    %% Integration Layer
    subgraph Integrations["External Integrations"]
        MedicalInt["Medical Integrations<br/>â€¢ EHR Systems<br/>â€¢ PACS/DICOM<br/>â€¢ Lab Systems<br/>â€¢ Pharmacy Networks<br/>â€¢ Insurance APIs<br/>â€¢ Government Health"]
        
        PublicInt["Public Integrations<br/>â€¢ Social Media<br/>â€¢ Payment Gateways<br/>â€¢ Analytics Services<br/>â€¢ Email Services<br/>â€¢ SMS Providers<br/>â€¢ CDN Services"]
    end
    
    %% Security & Compliance Layer
    subgraph Security["Security & Compliance Layer"]
        SecCore["Security Core<br/>â€¢ WAF<br/>â€¢ DDoS Protection<br/>â€¢ Encryption at Rest<br/>â€¢ Encryption in Transit<br/>â€¢ Key Management"]
        
        MedCompliance["Medical Compliance<br/>â€¢ HIPAA Controls<br/>â€¢ PHI Protection<br/>â€¢ Audit Trails<br/>â€¢ Access Logs<br/>â€¢ Data Retention"]
        
        PubCompliance["Public Compliance<br/>â€¢ GDPR Controls<br/>â€¢ Privacy Protection<br/>â€¢ Cookie Management<br/>â€¢ Data Rights<br/>â€¢ Content Moderation"]
    end
    
    %% Monitoring & Operations
    subgraph Operations["Operations & Monitoring"]
        Monitoring["Monitoring Stack<br/>â€¢ Prometheus<br/>â€¢ Grafana<br/>â€¢ ELK Stack<br/>â€¢ APM<br/>â€¢ Health Checks"]
        
        DevOps["DevOps Pipeline<br/>â€¢ CI/CD<br/>â€¢ GitOps<br/>â€¢ Automated Testing<br/>â€¢ Deployment<br/>â€¢ Rollback"]
    end
    
    %% Connections - User Flow
    MedUsers --> MedReact
    MedUsers --> MedMobile
    PubUsers --> PubReact
    PubUsers --> PubMobile
    
    %% Frontend to Gateway
    MedReact --> MedRoutes
    MedMobile --> MedRoutes
    PubReact --> PubRoutes
    PubMobile --> PubRoutes
    MedReact --> SharedUI
    PubReact --> SharedUI
    
    %% Gateway Routing
    MedRoutes --> RouteEngine
    PubRoutes --> RouteEngine
    SharedRoutes --> RouteEngine
    RouteEngine --> GatewayMiddleware
    
    %% Gateway to Services
    GatewayMiddleware --> Identity
    GatewayMiddleware --> Communication
    GatewayMiddleware --> Content
    GatewayMiddleware --> Workflow
    GatewayMiddleware --> MedicalExt
    GatewayMiddleware --> PublicExt
    GatewayMiddleware --> DjangoMiddleware
    
    %% Django Internal
    DjangoMiddleware --> CoreApps
    DjangoMiddleware --> MedApps
    DjangoMiddleware --> PubApps
    
    %% Service to Data Layer
    Identity --> IdentityDB
    Content --> ContentDB
    CoreApps --> SharedDB
    MedApps --> MedicalDB
    PubApps --> PublicDB
    MedicalExt --> MedicalDB
    PublicExt --> PublicDB
    
    %% Cache connections
    Identity --> Redis
    Communication --> Redis
    Django --> Redis
    
    %% Storage connections
    Content --> MedStorage
    Content --> PubStorage
    MedApps --> MedStorage
    PubApps --> PubStorage
    
    %% External Integrations
    MedicalExt --> MedicalInt
    PublicExt --> PublicInt
    Communication --> PublicInt
    
    %% Security Layer
    Gateway --> SecCore
    MedApps --> MedCompliance
    PubApps --> PubCompliance
    
    %% Monitoring
    Microservices --> Monitoring
    Django --> Monitoring
    Gateway --> Monitoring
    DataLayer --> Monitoring
    
    %% Styling
    classDef medical fill:#e8f5e9,stroke:#4caf50,stroke-width:3px
    classDef public fill:#e3f2fd,stroke:#2196f3,stroke-width:3px
    classDef shared fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef data fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef security fill:#ffebee,stroke:#f44336,stroke-width:2px
    classDef gateway fill:#e0f2f1,stroke:#009688,stroke-width:3px
    
    class MedUsers,MedReact,MedMobile,MedRoutes,MedicalExt,MedApps,MedicalDB,MedStorage,MedicalInt,MedCompliance medical
    class PubUsers,PubReact,PubMobile,PubRoutes,PublicExt,PubApps,PublicDB,PubStorage,PublicInt,PubCompliance public
    class SharedUI,SharedRoutes,Identity,Communication,Content,Workflow,CoreApps,SharedDB,Redis shared
    class IdentityDB,ContentDB,Databases,Cache,Storage,DataLayer data
    class SecCore,Security,MedCompliance,PubCompliance security
    class Gateway,RouteEngine,GatewayMiddleware,Routes gateway
    
    %% Legend
    subgraph Legend["Architecture Legend"]
        L1["ðŸŸ¢ Medical Hub Components"]
        L2["ðŸ”µ Public Hub Components"]
        L3["ðŸŸ  Shared Platform Services"]
        L4["ðŸŸ£ Data Layer"]
        L5["ðŸ”´ Security & Compliance"]
        L6["ðŸŸ¦ API Gateway"]
    end